#:import window kivy.core.window.Window
#:include login.kv

WindowManager:
    LoginPage:
    SignUpPage:
    HomePage:
    MealTypeSelectionPage:
    AddRestaurantMealPage:
    AddHomeMadeMealPage:
    ViewMealsPage:
    EditRestaurantMealPage:
    EditHomeMadeMealPage:
    SuggestionPage:
    ResultPage:


<MyButton>
    size_hint: 0.9, 1
    pos_hint: {'center_x': 0.5}


<MyBoxLayout>
    orientation: "vertical"
    spacing: "20dp"
    padding: [0, 0, 0, "20dp"]


<MDLabel>:
    theme_text_color: "Custom"


<MDTextField>:
    mode: "rectangle"
    size_hint_x: 0.8
    pos_hint: {"center_x": 0.5}
    current_hint_text_color: 1, 0.5, 0, 1
    multiline: False


<SwipeToDeleteItem>:
    size_hint_y: None
    height: content.height
    swipe_distance: root.width
    max_swipe_x: 0.1
    max_opened_x: "50dp"
    text: ""
    on_swipe_complete:
        root.ids.delete.disabled = False if self.state == "opened" else True
    MDCardSwipeLayerBox:
        MDIconButton:
            id: delete
            icon: "trash-can"
            theme_text_color: "Custom"
            text_color: 1, 0, 0, 1
            disabled: True
    MDCardSwipeFrontBox:
        canvas.before:
            Color:
                rgba: 1, 0.6, 0, 1
            Rectangle:
                size: self.size
                pos: self.pos
        OneLineListItem:
            id: content
            text: root.text
            theme_text_color: "Custom"
            text_color: 0, 0, 0, 0.9
            _no_ripple_effect: True


<HomePage>:
    name: "HomePage"
    MyBoxLayout:
        size: root.width, root.height
        MDToolbar:
            title:'Su-gest'
        MyButton:
            text: "Add Meal"
            on_release:
                app.root.current = "MealTypeSelectionPage"
                root.manager.transition.direction = "left"
        MyButton:
            text: "View Meal"
            on_release:
                app.root.current = "ViewMealsPage"
                root.manager.transition.direction = "left"
        MyButton:
            text: "Suggest Meal"
            on_release:
                app.root.current = "SuggestionPage"
                root.manager.transition.direction = "left"


<MealTypeSelectionPage>:
    name: "MealTypeSelectionPage"
    MyBoxLayout:
        size: root.width, root.height
        MDToolbar:
            title:'Su-gest'
        MyButton:
            text: "Restaurant"
            on_release:
                app.root.current = "AddRestaurantMealPage"
                root.manager.transition.direction = "left"
        MyButton:
            text: "Home-Made"
            on_release:
                app.root.current = "AddHomeMadeMealPage"
                root.manager.transition.direction = "left"


<AddRestaurantMealPage>:
    name: "AddRestaurantMealPage"
    MyBoxLayout:
        MDToolbar:
            title:'Su-gest'
        GridLayout:
            cols: 3
            MDLabel:
                text: "Choose Meal Type: "
                text_color: 1, 0.5, 0, 1
                halign: "center"
            BoxLayout:
                orientation: "vertical"
                size_hint_x: None
                width: "50dp"
                MDCheckbox:
                    id: Breakfast
                MDCheckbox:
                    id: Lunch
                MDCheckbox:
                    id: Dinner
                MDCheckbox:
                    id: Snacks
            BoxLayout:
                size_hint_x: 0.4
                orientation: "vertical"
                MDLabel:
                    text: "Breakfast"
                    text_color: 1, 0.5, 0, 1
                MDLabel:
                    text: "Lunch"
                    text_color: 1, 0.5, 0, 1
                MDLabel:
                    text: "Dinner"
                    text_color: 1, 0.5, 0, 1
                MDLabel:
                    text: "Snack"
                    text_color: 1, 0.5, 0, 1
        MDTextField:
            id: dish_name
            hint_text: "Enter dish name"
        MDTextField:
            id: restaurant_name
            hint_text: "Enter restaurant name"
        MDTextField:
            id: restaurant_number
            hint_text: "Enter restaurant number"
        MDTextField:
            id: delivery_links
            size_hint: 0.8, 1
            multiline: True
            hint_text: "Enter Delivery links"
        MDFillRoundFlatButton:
            text: "Add Meal"
            size_hint: 0.9, None
            pos_hint: {'center_x': 0.5}
            height: "50dp"
            on_release:
                root.add_meal()


<AddHomeMadeMealPage>:
    name: "AddHomeMadeMealPage"
    MyBoxLayout:
        MDToolbar:
            title:'Su-gest'
        GridLayout:
            cols: 3
            MDLabel:
                text: "Choose Meal Type: "
                text_color: 1, 0.5, 0, 1
                halign: "center"
            BoxLayout:
                orientation: "vertical"
                size_hint_x: None
                width: "50dp"
                MDCheckbox:
                    id: Breakfast
                MDCheckbox:
                    id: Lunch
                MDCheckbox:
                    id: Dinner
                MDCheckbox:
                    id: Snacks
            BoxLayout:
                size_hint_x: 0.4
                orientation: "vertical"
                MDLabel:
                    text: "Breakfast"
                    text_color: 1, 0.5, 0, 1
                MDLabel:
                    text: "Lunch"
                    text_color: 1, 0.5, 0, 1
                MDLabel:
                    text: "Dinner"
                    text_color: 1, 0.5, 0, 1
                MDLabel:
                    text: "Snack"
                    text_color: 1, 0.5, 0, 1
        MDTextField:
            id: dish_name
            hint_text: "Enter dish name"
        MDTextField:
            id: ingredients
            size_hint: 0.8, 1
            multiline: True
            hint_text: "Enter Ingredients"
        MDTextField:
            id: recipe
            size_hint: 0.8, 1
            multiline: True
            hint_text: "Enter Recipe"
        MDFillRoundFlatButton:
            text: "Add Meal"
            size_hint: 0.9, None
            pos_hint: {'center_x': 0.5}
            height: "50dp"
            on_release:
                root.add_meal()


<ViewMealsPage>:
    name: "ViewMealsPage"
    MDBoxLayout:
        size: root.width, root.height
        orientation: "vertical"
        spacing: "1dp"
        MDToolbar:
            title:'Su-gest'
        ScrollView:
            GridLayout:
                id: grid
                cols: 1
                spacing: "1dp"
                size_hint_y: None
                height: self.minimum_height


<EditRestaurantMealPage>:
    name: "EditRestaurantMealPage"
    BoxLayout:
        size: root.width, root.height
        orientation: "vertical"
        MDToolbar:
            title:'Su-gest'
        GridLayout:
            cols: 3
            MDLabel:
                text: "Choose Meal Type: "
                size_hint_x: None
                width: "150dp"
            BoxLayout:
                orientation: "vertical"
                MDCheckbox:
                    id: Breakfast
                MDCheckbox:
                    id: Lunch
                MDCheckbox:
                    id: Dinner
                MDCheckbox:
                    id: Snacks
            BoxLayout:
                orientation: "vertical"
                MDLabel:
                    text: "Breakfast"
                MDLabel:
                    text: "Lunch"
                MDLabel:
                    text: "Dinner"
                MDLabel:
                    text: "Snacks"
        MDLabel:
            text: "Dish Name:"
            text_size: self.size
            halign: "left"
            size_hint_y: None
            height: "20dp"
        TextInput:
            id: dish_name
            size_hint_y: None
            height: "50dp"
            multiline: False
        MDLabel:
            text: "Restaurant Name:"
            text_size: self.size
            halign: "left"
            size_hint_y: None
            height: "20dp"
        TextInput:
            id: restaurant_name
            size_hint_y: None
            height: "50dp"
            multiline: False
        MDLabel:
            text: "Restaurant Number:"
            text_size: self.size
            halign: "left"
            size_hint_y: None
            height: "20dp"
        TextInput:
            id: restaurant_number
            size_hint_y: None
            height: "50dp"
            multiline: False
        MDLabel:
            text: "Delivery links:"
            text_size: self.size
            halign: "left"
            size_hint_y: None
            height: "20dp"
        TextInput:
            id: delivery_links
            multiline: True
        Button:
            text: "Save Changes"
            size_hint_y: None
            height: "50dp"
            on_release:
                root.save_changes()


<EditHomeMadeMealPage>:
    name: "EditHomeMadeMealPage"
    BoxLayout:
        size: root.width, root.height
        orientation: "vertical"
        MDToolbar:
            title:'Su-gest'
        GridLayout:
            cols: 3
            MDLabel:
                text: "Choose Meal Type: "
                size_hint_x: None
                width: "150dp"
            BoxLayout:
                orientation: "vertical"
                MDCheckbox:
                    id: Breakfast
                MDCheckbox:
                    id: Lunch
                MDCheckbox:
                    id: Dinner
                MDCheckbox:
                    id: Snacks
            BoxLayout:
                orientation: "vertical"
                MDLabel:
                    text: "Breakfast"
                MDLabel:
                    text: "Lunch"
                MDLabel:
                    text: "Dinner"
                MDLabel:
                    text: "Snacks"
        MDLabel:
            text: "Dish Name:"
            text_size: self.size
            halign: "left"
            size_hint_y: None
            height: "20dp"
        TextInput:
            id: dish_name
            size_hint_y: None
            height: "50dp"
            multiline: False
        MDLabel:
            text: "Ingredients:"
            text_size: self.size
            halign: "left"
            size_hint_y: None
            height: "20dp"
        TextInput:
            id: ingredients
            multiline: True
        MDLabel:
            text: "Recipe:"
            text_size: self.size
            halign: "left"
            size_hint_y: None
            height: "20dp"
        TextInput:
            id: recipe
            multiline: True
        Button:
            text: "Save Changes"
            size_hint_y: None
            height: "50dp"
            on_release:
                root.save_changes()


<SuggestionPage>:
    name: "SuggestionPage"
    BoxLayout:
        size: root.width, root.height
        orientation: "vertical"
        MDToolbar:
            title:'Su-gest'
        GridLayout:
            cols: 2
            size_hint_y: None
            height: "50dp"
            MDLabel:
                text: "Choose Meal From: "
            Spinner:
                id: meal_from
                text: "Home-made"
                values: ["Home-made", "Restaurant", "Mix"]
        MDLabel:
            text: ""
            size_hint: 1, 0.5
        GridLayout:
            cols: 2
            MDLabel:
                text: "Choose Meal Type: "
                size_hint_y: None
                height: "50dp"
            Spinner:
                id: meal_type
                size_hint_y: None
                height: "50dp"
                text: "Breakfast"
                values: ["Breakfast", "Lunch", "Dinner", "Snacks"]
        Button:
            text: "Suggest Meal"
            size_hint_y: None
            height: "50dp"
            on_release:
                root.result()


<ResultPage>:
    name: "ResultPage"
    BoxLayout:
        size: root.width, root.height
        orientation: "vertical"
        MDToolbar:
            title:'Su-gest'
        GridLayout:
            cols: 2
            size_hint_y: None
            height: "50 dp"
            MDLabel:
                text: "Dish name: "
                size_hint_x: 0.3
            MDLabel:
                id: dish_name
                text: ""
        ScrollView:
            BoxLayout:
                id: meal_details
                orientation: "vertical"
                size: root.width, root.height
                size_hint: 1, None
                height: self.minimum_height
#                MDLabel:
#                    text: "Ingredients:"
#                    font_size: 25
#                    text_size: self.size
#                    halign: "left"
#                    size_hint_y: None
#                    height: "30dp"
#                MDLabel:
#                    text: "Eggs\nSalt\nPepper\nMilk\nEggs\nSalt\nPepper\nEggs\nSalt\nPepper\nEggs\nSalt\nPepper\n"
#                    size_hint_y: None
#                    text_size: self.width, None
#                    height: self.texture_size[1]
#                    halign: "left"
#                Widget:
#                    size_hint_y: None
#                    height: "30dp"
#                MDLabel:
#                    text: "Recipe:"
#                    font_size: 25
#                    text_size: self.size
#                    halign: "left"
#                    size_hint_y: None
#                    height: "30dp"
#                MDLabel:
#                    text: "Beat it\nHeat it\nEat it\nBeat it\nHeat it\nEat itBeat it\nHeat it\nEat itBeat it\nHeat it\nEat it"
#                    size_hint_y: None
#                    text_size: self.width, None
#                    height: self.texture_size[1]
#                    halign: "left"
#                Widget:
        Button:
            text: "Change"
            size_hint_y: None
            height: "50dp"
            on_release:
                root.change()
