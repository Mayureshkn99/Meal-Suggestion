#:import window kivy.core.window.Window
#:include login.kv

WindowManager:
    LoginPage:
    SignUpPage:
    HomePage:
    MealTypeSelectionPage:
    AddRestaurantMealPage:
    AddHomeMadeMealPage:
    ViewMealsPage:
    EditRestaurantMealPage:
    EditHomeMadeMealPage:
    SuggestionPage:
    ResultPage:


<MyButton>
    size_hint: 0.9, 1
    pos_hint: {'center_x': 0.5}


<MyBoxLayout>
    orientation: "vertical"
    spacing: "20dp"
    padding: [0, 0, 0, "20dp"]


<MDLabel>:
    theme_text_color: "Custom"


<MDTextField>:
    mode: "rectangle"
    size_hint_x: 0.8
    pos_hint: {"center_x": 0.5}
    current_hint_text_color: 1, 0.5, 0, 1
    multiline: False


<SwipeToDeleteItem>:
    size_hint_y: None
    height: content.height
    swipe_distance: root.width
    max_swipe_x: 0.1
    max_opened_x: "50dp"
    text: ""
    on_swipe_complete:
        root.ids.delete.disabled = False if self.state == "opened" else True
    MDCardSwipeLayerBox:
        MDIconButton:
            id: delete
            icon: "trash-can"
            theme_text_color: "Custom"
            text_color: 1, 0, 0, 1
            disabled: True
    MDCardSwipeFrontBox:
        canvas.before:
            Color:
                rgba: 1, 0.6, 0, 1
            Rectangle:
                size: self.size
                pos: self.pos
        OneLineListItem:
            id: content
            text: root.text
            theme_text_color: "Custom"
            text_color: 0, 0, 0, 0.9
            _no_ripple_effect: True


<MDExpansionPanel>
    canvas:
        Color:
            rgba: 1, 0.5, 0, 1
        Rectangle:
            size: self.size


<Content>
    size_hint_y: None
    height: self.minimum_height
    orientation: "vertical"


<MD3Card>:
    border_radius: 20
    radius: [10]
    size_hint_y: None
    text: "blah"
    md_bg_color: 1, 0.5, 0, 0.7


<MyCard>
    height: label.texture_size[1] + dp(30)
    orientation: "vertical"
    MDLabel:
        theme_text_color: "Custom"
        text: root.title
        font_style: "H6"
        size_hint_y: None
        height: "40dp"
        padding: (20 ,0)
    MDSeparator:
        color: 0, 0, 0, 0.1
    MDLabel:
        id: label
        theme_text_color: "Custom"
        text: root.content
        padding: ("20dp", "10dp")


<HomePage>:
    name: "HomePage"
    MyBoxLayout:
        size: root.width, root.height
        MDToolbar:
            title:'Su-gest'
        MyButton:
            text: "Add Meal"
            on_release:
                app.root.current = "MealTypeSelectionPage"
                root.manager.transition.direction = "left"
        MyButton:
            text: "View Meal"
            on_release:
                app.root.current = "ViewMealsPage"
                root.manager.transition.direction = "left"
        MyButton:
            text: "Suggest Meal"
            on_release:
                app.root.current = "SuggestionPage"
                root.manager.transition.direction = "left"


<MealTypeSelectionPage>:
    name: "MealTypeSelectionPage"
    MyBoxLayout:
        size: root.width, root.height
        MDToolbar:
            title:'Su-gest'
        MyButton:
            text: "Restaurant"
            on_release:
                app.root.current = "AddRestaurantMealPage"
                root.manager.transition.direction = "left"
        MyButton:
            text: "Home-Made"
            on_release:
                app.root.current = "AddHomeMadeMealPage"
                root.manager.transition.direction = "left"


<AddRestaurantMealPage>:
    name: "AddRestaurantMealPage"
    MyBoxLayout:
        MDToolbar:
            title:'Su-gest'
        GridLayout:
            cols: 3
            MDLabel:
                text: "Choose Meal Type: "
                text_color: 1, 0.5, 0, 1
                halign: "center"
            BoxLayout:
                orientation: "vertical"
                size_hint_x: None
                width: "50dp"
                MDCheckbox:
                    id: Breakfast
                MDCheckbox:
                    id: Lunch
                MDCheckbox:
                    id: Dinner
                MDCheckbox:
                    id: Snacks
            BoxLayout:
                size_hint_x: 0.4
                orientation: "vertical"
                MDLabel:
                    text: "Breakfast"
                    text_color: 1, 0.5, 0, 1
                MDLabel:
                    text: "Lunch"
                    text_color: 1, 0.5, 0, 1
                MDLabel:
                    text: "Dinner"
                    text_color: 1, 0.5, 0, 1
                MDLabel:
                    text: "Snack"
                    text_color: 1, 0.5, 0, 1
        MDTextField:
            id: dish_name
            hint_text: "Enter dish name"
        MDTextField:
            id: restaurant_name
            hint_text: "Enter restaurant name"
        MDTextField:
            id: restaurant_number
            hint_text: "Enter restaurant number"
        MDTextField:
            id: delivery_links
            size_hint: 0.8, 1
            multiline: True
            hint_text: "Enter Delivery links"
        MDFillRoundFlatButton:
            text: "Add Meal"
            size_hint: 0.9, None
            pos_hint: {'center_x': 0.5}
            height: "50dp"
            on_release:
                root.add_meal()


<AddHomeMadeMealPage>:
    name: "AddHomeMadeMealPage"
    MyBoxLayout:
        MDToolbar:
            title:'Su-gest'
        GridLayout:
            cols: 3
            MDLabel:
                text: "Choose Meal Type: "
                text_color: 1, 0.5, 0, 1
                halign: "center"
            BoxLayout:
                orientation: "vertical"
                size_hint_x: None
                width: "50dp"
                MDCheckbox:
                    id: Breakfast
                MDCheckbox:
                    id: Lunch
                MDCheckbox:
                    id: Dinner
                MDCheckbox:
                    id: Snacks
            BoxLayout:
                size_hint_x: 0.4
                orientation: "vertical"
                MDLabel:
                    text: "Breakfast"
                    text_color: 1, 0.5, 0, 1
                MDLabel:
                    text: "Lunch"
                    text_color: 1, 0.5, 0, 1
                MDLabel:
                    text: "Dinner"
                    text_color: 1, 0.5, 0, 1
                MDLabel:
                    text: "Snack"
                    text_color: 1, 0.5, 0, 1
        MDTextField:
            id: dish_name
            hint_text: "Enter dish name"
        MDTextField:
            id: ingredients
            size_hint: 0.8, 1
            multiline: True
            hint_text: "Enter Ingredients"
        MDTextField:
            id: recipe
            size_hint: 0.8, 1
            multiline: True
            hint_text: "Enter Recipe"
        MDFillRoundFlatButton:
            text: "Add Meal"
            size_hint: 0.9, None
            pos_hint: {'center_x': 0.5}
            height: "50dp"
            on_release:
                root.add_meal()


<ViewMealsPage>:
    name: "ViewMealsPage"
    MDBoxLayout:
        size: root.width, root.height
        orientation: "vertical"
        spacing: "1dp"
        MDToolbar:
            title:'Su-gest'
        ScrollView:
            GridLayout:
                id: grid
                cols: 1
                spacing: "1dp"
                size_hint_y: None
                height: self.minimum_height


<EditRestaurantMealPage>:
    name: "EditRestaurantMealPage"
    MyBoxLayout:
        MDToolbar:
            title:'Su-gest'
        GridLayout:
            cols: 3
            MDLabel:
                text: "Choose Meal Type: "
                text_color: 1, 0.5, 0, 1
                halign: "center"
            BoxLayout:
                orientation: "vertical"
                size_hint_x: None
                width: "50dp"
                MDCheckbox:
                    id: Breakfast
                MDCheckbox:
                    id: Lunch
                MDCheckbox:
                    id: Dinner
                MDCheckbox:
                    id: Snacks
            BoxLayout:
                size_hint_x: 0.4
                orientation: "vertical"
                MDLabel:
                    text: "Breakfast"
                    text_color: 1, 0.5, 0, 1
                MDLabel:
                    text: "Lunch"
                    text_color: 1, 0.5, 0, 1
                MDLabel:
                    text: "Dinner"
                    text_color: 1, 0.5, 0, 1
                MDLabel:
                    text: "Snacks"
                    text_color: 1, 0.5, 0, 1
        MDTextField:
            id: dish_name
            hint_text: "Dish name"
        MDTextField:
            id: restaurant_name
            hint_text: "Restaurant name"
        MDTextField:
            id: restaurant_number
            hint_text: "Restaurant number"
        MDTextField:
            id: delivery_links
            size_hint: 0.8, 1
            multiline: True
            hint_text: "Delivery links"
        MDFillRoundFlatButton:
            text: "Save Changes"
            size_hint: 0.9, None
            pos_hint: {'center_x': 0.5}
            height: "50dp"
            on_release:
                root.save_changes()


<EditHomeMadeMealPage>:
    name: "EditHomeMadeMealPage"
    MyBoxLayout:
        MDToolbar:
            title:'Su-gest'
        GridLayout:
            cols: 3
            MDLabel:
                text: "Choose Meal Type: "
                text_color: 1, 0.5, 0, 1
                halign: "center"
            BoxLayout:
                orientation: "vertical"
                size_hint_x: None
                width: "50dp"
                MDCheckbox:
                    id: Breakfast
                MDCheckbox:
                    id: Lunch
                MDCheckbox:
                    id: Dinner
                MDCheckbox:
                    id: Snacks
            BoxLayout:
                size_hint_x: 0.4
                orientation: "vertical"
                MDLabel:
                    text: "Breakfast"
                    text_color: 1, 0.5, 0, 1
                MDLabel:
                    text: "Lunch"
                    text_color: 1, 0.5, 0, 1
                MDLabel:
                    text: "Dinner"
                    text_color: 1, 0.5, 0, 1
                MDLabel:
                    text: "Snacks"
                    text_color: 1, 0.5, 0, 1
        MDTextField:
            id: dish_name
            hint_text: "Dish name"
        MDTextField:
            id: recipe
            size_hint: 0.8, 1
            multiline: True
            hint_text: "Recipe"
        MDTextField:
            id: ingredients
            size_hint: 0.8, 1
            multiline: True
            hint_text: "Ingredients"
        MDFillRoundFlatButton:
            text: "Save Changes"
            size_hint: 0.9, None
            pos_hint: {'center_x': 0.5}
            height: "50dp"
            on_release:
                root.save_changes()


<SuggestionPage>:
    name: "SuggestionPage"
    BoxLayout:
        size: root.width, root.height
        orientation: "vertical"
        MDToolbar:
            title:'Su-gest'
        FloatLayout:
            id: box
            size: root.width, root.height
            MDFillRoundFlatButton:
                text: "Su-gest"
                size_hint: 0.9, None
                pos_hint: {'center_x': 0.5, 'center_y': 0.06}
                height: "50dp"
                on_release:
                    root.result()


<ResultPage>:
    name: "ResultPage"
    BoxLayout:
        size: root.width, root.height
        orientation: "vertical"
        MDToolbar:
            title:'Su-gest'
        BoxLayout:
            orientation: "vertical"
            size_hint_y: None
            height: "70dp"
            padding: [0, 0, 0, 10]
            MD3Card:
                height: "50dp"
                size_hint: 0.9, None
                pos_hint: {'center_x': 0.5}
                MDLabel:
                    id: dish_name
                    font_style: "H6"
                    theme_text_color: "Custom"
                    halign: "center"
        ScrollView:
            BoxLayout:
                id: meal_details
                orientation: "vertical"
                spacing: "10dp"
                padding: ["20dp", 0]
                size_hint_y: None
                height: self.minimum_height
        BoxLayout:
            orientation: "vertical"
            size_hint_y: None
            height: "60dp"
            padding: (0, 10)
            MDFillRoundFlatButton:
                text: "Change"
                size_hint: 0.9, None
                pos_hint: {'center_x': 0.5, 'center_y': 0.06}
                height: "50dp"
                on_release:
                    root.change()
